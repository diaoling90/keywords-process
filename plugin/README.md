# Google Trends 关键词收集器 - 浏览器插件

这是一个Chrome浏览器插件，用于自动收集Google Trends中趋势超过300%的关键词并保存到本地数据库。

## 功能特点

### 🚀 手动收集高趋势关键词
- **精准采集**：基于真实DOM结构的精确选择器
- **智能筛选**：采集趋势超过 300% 的关键词
- **飙升检测**：识别并收集显示"飙升"标识的关键词
- **全页面扫描**：自动翻页收集所有页面的关键词，不只是第一页
- **手动触发**：仅在用户点击时收集，避免干扰浏览
- **去重处理**：避免重复收集相同关键词

### 📊 数据收集范围
- **百分比关键词**：收集趋势增长超过 300% 的关键词
- **飙升关键词**：收集显示"飙升"、"Breakout"、"突出"标识的关键词
- **多页面支持**：自动处理翻页，收集所有页面的关键词（最多10页）
- **中英文支持**：支持中文和英文的Google Trends页面

### 🔧 技术特性
- **智能翻页**：自动检测并点击翻页按钮
- **页面加载等待**：等待页面完全加载后再收集数据
- **错误处理**：网络错误、页面异常时的容错处理
- **状态管理**：防止重复操作和无限循环

## 安装步骤

### 1. 准备图标文件

在 `plugin/icons/` 目录下，您需要准备以下图标文件：

```
icons/
├── icon16.png     (16x16 像素)
├── icon32.png     (32x32 像素)
├── icon48.png     (48x48 像素)
└── icon128.png    (128x128 像素)
```

**快速创建图标：**
- 可以使用任何在线图标生成器
- 推荐图标：🔍 (放大镜) 或 📈 (趋势图)
- 建议颜色：蓝色或绿色系

### 2. 安装插件

1. 打开Chrome浏览器
2. 地址栏输入：`chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `plugin` 目录
6. 插件安装完成！

### 3. 启动本地服务器

确保关键词管理工具的服务器正在运行：

```bash
cd /d/cursor/web/tools/keyword
node server.js
```

服务器应该运行在 `http://localhost:3000`

## 使用方法

### 基本使用

1. **访问Google Trends**
   - 打开 https://trends.google.com/trends/explore
   - 搜索任意关键词

2. **启动收集器**
   - 点击浏览器工具栏中的插件图标
   - 点击"启动收集"按钮
   - 插件开始自动监控页面

3. **查看结果**
   - 高趋势关键词会自动保存到数据库
   - 成功/失败会有通知提示
   - 可以在关键词管理页面查看收集结果

### 高级功能

- **立即收集**: 点击"立即收集"手动触发一次收集
- **状态监控**: 弹窗显示收集器状态和API连接状态
- **自动监控**: 启动后会自动监控页面变化，无需手动操作

## 工作原理

### 监控机制
- 使用MutationObserver监控DOM变化
- 每10秒自动检查一次相关查询
- 智能识别多种页面结构

### 关键词提取
- 自动查找相关查询表格
- 解析趋势百分比数据
- 过滤出超过300%的关键词

### 数据保存
- 通过API接口保存到MongoDB
- 包含趋势百分比和来源信息
- 自动去重，避免重复收集

## 故障排除

### 常见问题

**1. 插件图标显示但无法启动**
- 检查是否在Google Trends探索页面
- 刷新页面后重试
- 查看浏览器控制台错误信息

**2. API连接失败**
- 确认本地服务器正在运行
- 检查端口3000是否被占用
- 验证MongoDB连接是否正常

**3. 无法收集到关键词**
- 确认页面有相关查询数据
- 检查是否有趋势超过300%的词
- 尝试搜索热门关键词

**4. 插件无法安装**
- 确认所有图标文件都存在
- 检查manifest.json语法是否正确
- 重新加载插件

### 调试方法

**查看插件日志：**
1. 右键点击插件图标 → "检查弹出内容"
2. 在Google Trends页面按F12，查看Console

**手动测试API：**
```bash
# 测试API连接
curl http://localhost:3000/api/keywords/all

# 手动添加关键词
curl -X POST http://localhost:3000/api/keywords \
  -H "Content-Type: application/json" \
  -d '{"keyword":"test keyword"}'
```

## 配置选项

可以修改以下文件中的配置：

**content.js**
- `apiUrl`: API服务器地址 (默认: http://localhost:3000)
- 趋势阈值: 修改 `trendPercentage > 300` 中的数值

**popup.js**
- `apiUrl`: API服务器地址
- 检查间隔等设置

## 开发说明

### 文件结构
```
plugin/
├── manifest.json    # 插件配置
├── content.js       # 页面内容脚本
├── background.js    # 后台服务脚本
├── popup.html       # 弹窗页面
├── popup.js         # 弹窗逻辑
├── icons/           # 图标文件
└── README.md        # 说明文档
```

### 扩展功能
- 可以添加更多的关键词过滤规则
- 支持自定义API服务器地址
- 添加关键词导出功能
- 增加更多的通知方式

## 许可证

本项目基于MIT许可证开源。

## 支持

如有问题或建议，请查看项目文档或联系开发者。 